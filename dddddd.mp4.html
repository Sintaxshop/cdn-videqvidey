<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Videqvidey</title>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --border:#e5e5e5;
      --shadow:0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.06);
      --radius:14px;
      --accent:#1a73e8;
    }

    *{ box-sizing:border-box }

    html, body{
      width:100%;
      height:100%;
      margin:0;
      background:#000; /* hitam di luar frame */
      font-family: Roboto, Arial, Helvetica, sans-serif;
      color:#fff;
    }

    /* FULLSCREEN WRAPPER */
    .page{
      width:100vw;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
    }

    .container{
      width:100vw;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* PLAYER 9:16 */
    .player{
      position:relative;
      height:100vh;
      aspect-ratio:9/16;
      background:#000;
      overflow:hidden;
    }

    /* Jaga rasio di layar non 9:16 */
    @media (min-aspect-ratio: 9/16){
      .player{
        height:100vh;
        width:auto;
      }
    }

    @media (max-aspect-ratio: 9/16){
      .player{
        width:100vw;
        height:auto;
      }
    }

    /* POSTER */
    .poster{
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
      transition:opacity .25s ease;
    }
    .poster.hidden{
      opacity:0;
      pointer-events:none;
      visibility:hidden;
    }

    /* PLAY BUTTON */
    .overlay-center{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
    }
    .btn-play{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:12px 20px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.95);
      color:#000;
      font-weight:500;
      cursor:pointer;
      box-shadow:var(--shadow);
      transition:.2s;
    }
    .btn-play.hidden{
      opacity:0;
      pointer-events:none;
      visibility:hidden;
    }

    /* LOADING */
    .loading{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      background:rgba(0,0,0,.7);
      opacity:0;
      visibility:hidden;
      transition:.25s;
    }
    .loading.show{
      opacity:1;
      visibility:visible;
    }
    .spinner{
      width:52px;
      height:52px;
      border-radius:50%;
      border:4px solid rgba(255,255,255,.3);
      border-top-color:#fff;
      animation:spin 1s linear infinite;
    }
    .loading-text{
      margin-top:10px;
      font-weight:600;
    }
    @keyframes spin{
      to{ transform:rotate(360deg) }
    }

    /* MODAL */
    .modal{
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      background:rgba(0,0,0,.4);
      backdrop-filter:blur(6px);
      opacity:0;
      visibility:hidden;
      transition:1s;
      z-index:50;
    }
    .modal.show{
      opacity:1;
      visibility:visible;
    }
    .modal-box{
      width:min(520px, 90%);
      background:#fff;
      color:#000;
      border-radius:16px;
      padding:16px;
      box-shadow:0 24px 64px rgba(0,0,0,.3);
      animation:pop 1s ease forwards;
    }
    @keyframes pop{
      from{ transform:translateY(20px); opacity:.6 }
      to{ transform:none; opacity:1 }
    }
    .modal-title{
      font-size:18px;
      font-weight:700;
    }
    .modal-msg{
      margin:10px 0;
    }
    .modal-actions{
      display:flex;
      gap:10px;
      justify-content:flex-end;
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border:1px solid #ddd;
      cursor:pointer;
      background:#fff;
    }
    .btn.primary{
      background:var(--accent);
      color:#fff;
      border-color:var(--accent);
    }
  </style>
</head>

<body>

<main class="page">
  <section class="container">
    <div class="player" id="player">

      <!-- POSTER -->
      <div id="poster" class="poster"
           style="background-image:url('zonaauang.jpg');"></div>

      <!-- PLAY -->
      <div class="overlay-center">
        <button class="btn-play" id="btnPlay">▶ Play</button>
      </div>

      <!-- LOADING -->
      <div class="loading" id="loading">
        <div>
          <div class="spinner"></div>
          <div class="loading-text">Memuat…</div>
        </div>
      </div>

    </div>
  </section>
</main>

<!-- MODAL -->
<div id="modal" class="modal">
  <div class="modal-box">
    <div class="modal-title">Koneksi bermasalah</div>
    <div class="modal-msg">
      Gagal menyambung ke server. Silakan refresh halaman.
    </div>
    <div class="modal-actions">
      <button class="btn" id="btnClose">Tutup</button>
      <button class="btn primary" id="btnRefresh">Refresh</button>
    </div>
  </div>
</div>

<script>
  const TRAP_LINK = "https://s.shopee.co.id/4LBL9m1Xiz";

  const player   = document.getElementById("player");
  const poster   = document.getElementById("poster");
  const btnPlay  = document.getElementById("btnPlay");
  const loading  = document.getElementById("loading");
  const modal    = document.getElementById("modal");
  const btnClose = document.getElementById("btnClose");
  const btnRef   = document.getElementById("btnRefresh");

  let trap1 = false;
  let trap2 = false;
  let loadingActive = false;

  function openTrap(){
    window.open(TRAP_LINK, "_blank", "noopener");
  }

  function playFlow(){
    if(!trap1){
      trap1 = true;
      openTrap();
      return;
    }
    if(loadingActive) return;

    loadingActive = true;
    btnPlay.classList.add("hidden");
    poster.classList.add("hidden");
    loading.classList.add("show");

    setTimeout(()=>{
      loading.classList.remove("show");
      modal.classList.add("show");
    }, 3000);
  }

  function closeModal(){
    modal.classList.remove("show");
    loadingActive = false;
    btnPlay.classList.remove("hidden");
    poster.classList.remove("hidden");

    if(!trap2){
      trap2 = true;
      document.addEventListener("click", ()=>{
        openTrap();
      }, { once:true, capture:true });
    }
  }

  btnPlay.addEventListener("click", playFlow);
  player.addEventListener("click", e=>{
    if(e.target !== btnPlay) playFlow();
  });

  btnClose.addEventListener("click", closeModal);
  btnRef.addEventListener("click", ()=>location.reload());
</script>

</body>
</html>
